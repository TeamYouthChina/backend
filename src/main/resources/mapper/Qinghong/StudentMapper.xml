<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.youthchina.dao.Qinghong.StudentMapper">
    <resultMap id="studentResultMap" type="com.youthchina.domain.Qinghong.BaseInfo">
        <id property="stu_id" column="STU_ID"/>
        <result property="stu_in_job" column="STU_IN_JOB"/>
        <result property="stu_in_job_comp" column="stu_in_job_comp"/>
        <collection property="EducationInfos" ofType="com.youthchina.domain.Qinghong.EducationInfo">
            <id property="edu_id" column="EDU_ID"/>
            <result property="edu_degree" column="EDU_DEGREE"/>
            <result property="edu_school" column="EDU_SCHOOL"/>
            <result property="edu_school_country" column="EDU_SCHOOL_COUNTRY"/>
            <result property="edu_school_location" column="EDU_SCHOOL_LOCATION"/>
            <result property="edu_major" column="EDU_MAJOR"/>
            <result property="edu_college" column="EDU_COLLEGE"/>
            <result property="edu_gpa" column="EDU_GPA"/>
            <result property="edu_start" column="EDU_START"/>
            <result property="edu_end" column="EDU_END"/>
        </collection>
        <collection property="Works" ofType="com.youthchina.domain.Qinghong.Work">
            <id property="work_id" column="WORK_ID"/>
            <result property="work_company" column="WORK_COMPANY"/>
            <result property="work_position" column="WORK_POSITION"/>
            <result property="work_location" column="WORK_LOCATION"/>
            <result property="work_sector" column="WORK_SECTOR"/>
            <result property="work_start_time" column="WORK_START_TIME"/>
            <result property="work_end_time" column="WORK_END_TIME"/>
            <result property="work_duty" column="WORK_DUTY"/>
            <result property="WORK_NATURE" column="WORK_NATURE"/>
        </collection>
        <association property="subInfo" javaType="com.youthchina.domain.Qinghong.SubInfo">

        </association>
        <collection property="projects" ofType="com.youthchina.domain.Qinghong.Project">

        </collection>
        <collection property="activities" ofType="com.youthchina.domain.Qinghong.Activity">

        </collection>
        <collection property="jobCollects" ofType="com.youthchina.domain.Qinghong.JobCollect">

        </collection>
        <collection property="compCollects" ofType="com.youthchina.domain.Qinghong.CompCollect">

        </collection>
        <collection property="advantageLabels" ofType="com.youthchina.domain.Qinghong.AdvantageLabel">

        </collection>
        <collection property="preferJobs" ofType="com.youthchina.domain.Qinghong.PreferJob">

        </collection>
        <collection property="preferIndustries" ofType="com.youthchina.domain.Qinghong.PreferIndustry">

        </collection>
        <collection property="preferCities" ofType="com.youthchina.domain.Qinghong.PreferCity">

        </collection>
        <association property="prefersalary" javaType="com.youthchina.domain.Qinghong.PreferSalary">

        </association>
        <association property="introducationVideo" javaType="com.youthchina.domain.Qinghong.IntroductionVideo">

        </association>
        <collection property="notifications" ofType="com.youthchina.domain.Qinghong.Notification">

        </collection>
        <collection property="jobApplies" ofType="com.youthchina.domain.Qinghong.JobApply">

        </collection>

    </resultMap>
    <resultMap id="companyCollectMap" type="com.youthchina.domain.Qinghong.CompCollect">
        <id property="collect_id" column="COLLECT_ID"/>
        <result property="company_id" column="COMPANY_ID"/>
        <result property="company_coll_time" column="COMPANY_COLL_TIME"/>
        <result property="stu_id" column="STU_ID"/>
        <result property="is_delete" column="IS_DELETE"/>
        <result property="is_delete_time" column="IS_DELETE_TIME"/>
    </resultMap>
    <resultMap id="jobCollectMap" type="com.youthchina.domain.Qinghong.JobCollect">
        <id property="collect_id" column="COLLECT_ID"/>
        <result property="job_id" column="job_ID"/>
        <result property="job_coll_time" column="job_COLL_TIME"/>
        <result property="stu_id" column="STU_ID"/>
        <result property="is_delete" column="IS_DELETE"/>
        <result property="is_delete_time" column="IS_DELETE_TIME"/>
    </resultMap>
    <resultMap id="jobApplyMap" type="com.youthchina.domain.Qinghong.JobApply">
        <id property="apply_id" column="APPLY_ID"/>
        <result property="stu_id" column="STU_ID"/>
        <result property="job_id" column="JOB_ID"/>
        <result property="job_cv_send" column="JOB_CV_SEND"/>
        <result property="job_apply_time" column="JOB_APPLY_TIME"/>
        <result property="job_apply_status" column="JOB_APPLY_STATUS"/>
        <association property="job" javaType="com.youthchina.domain.Qinghong.Job">
            <association property="company" javaType="com.youthchina.domain.Qinghong.Company">

            </association>
        </association>
    </resultMap>
    <resultMap id="jobInfo" type="com.youthchina.domain.Qinghong.Job">
        <association property="company" javaType="com.youthchina.domain.Qinghong.Company">

        </association>
        <association property="hr" javaType="com.youthchina.domain.Qinghong.HrInfo">

        </association>
    </resultMap>
    <select id="getByJobId" resultMap="jobInfo">
        select *
        from JOB_INFO
        where JOB_ID=#{job_id}
    </select>
    <select id="getAllJobApply" resultMap="jobApplyMap">
        select a.*,j.*,c.*
        from STU_JOB_APPLY a.*
        Left JOIN JOB_INFO j on j.JOB_ID=a.JOB_ID
        Left JOIN COMPANY_INFO c on j.COMAPNY_ID=c.COMPANY_ID
        where a.STU_ID=#{stu_id}
    </select>
    <select id="getByPrimaryKey" resultMap="studentResultMap">
        select a.*,b.*,c.*,d.*,e.*,f.*,g.*,h.*,i.*,j.*,k.*,l.*,m.*,n.*,o.*,p.*
        from STU_INFO a;
        LEFT JOIN STU_EDU_INFO b ON a.STU_ID=b.STU_ID
        LEFT JOIN STU_SUB_INFO c ON a.STU_ID=c.STU_ID
        LEFT JOIN STU_PROJECT d ON a.STU_ID=d.STU_ID
        LEFT JOIN STU_WORK e ON a.STU_ID=e.STU_ID
        LEFT JOIN STU_ACTIVITY f ON a.STU_ID=f.STU_ID
        LEFT JOIN STU_JOB_COLLECT g ON a.STU_ID=g.STU_ID
        LEFT JOIN STU_COMP_COLLECT h ON a.STU_ID=h.STU_ID
        LEFT JOIN STU_ADVAN_LABEL i ON a.STU_ID=i.STU_ID
        LEFT JOIN STU_PREFER_JOB j ON a.STU_ID=j.STU_ID
        LEFT JOIN STU_PREFER_INDUSTRY k ON a.STU_ID=k.STU_ID
        LEFT JOIN STU_PREFER_CITY l ON a.STU_ID=l.PRE_STU_ID
        LEFT JOIN STU_PREFER_SALARY m ON a.STU_ID=m.STU_ID
        LEFT JOIN STU_PREFER_INTRODUCTION_VIDEO n ON a.STU_ID=n.STU_ID
        LEFT JOIN STU_PREFER_NOTIFICATION o ON a.STU_ID=o.STU_ID
        LEFT JOIN STU_JOB_APPLY p ON a.STU_ID=p.STU_ID
        WHERE a.stu_id=#{stu_id} AND a.IS_DELETE=0 AND b.IS_DELETE=0
        AND c.IS_DELETE=0 AND d.IS_DELETE=0 AND e.IS_DELETE=0 AND f.IS_DELETE=0
        AND g.IS_DELETE=0 AND h.IS_DELETE=0 AND i.IS_DELETE=0 AND j.IS_DELETE=0
        AND k.IS_DELETE=0 AND l.IS_DELETE=0 AND m.IS_DELETE=0 AND n.IS_DELETE=0
        AND o.IS_DELETE=0 AND p.IS_DELETE=0
    </select>
    <select id="getOneCompCollect" resultMap="CompCollect">
        select * from STU_COMP_COLLECT where STU_ID=#{0} and COMPANY_ID=#{1}
    </select>
    <select id="getOneJobCollect" resultMap="JobCollect">
        select * from STU_JOB_COLLECT where STU_ID=#{0} and JOB_ID=#{1}
    </select>
    <insert id="addOneCompCollect" useGeneratedKeys="true" keyProperty="collect_id">
        insert into STU_COMP_COLLECT
        (COMPANY_ID,COMPANY_COLL_TIME,STU_ID,IS_DELETE,IS_DELETE_TIME)
        values
        (#{company_id},#{company_coll_time},#{stu_id},#{is_delete},#{is_delete_time})
    </insert>
    <insert id="addOneJobCollect" useGeneratedKeys="true" keyProperty="job_id">
        insert into STU_JOB_COLLECT
        (JOB_ID,JOB_COLL_TIME,STU_ID,IS_DELETE,IS_DELETE_TIME)
        values
        (#{job_id},#{job_coll_time},#{stu_id},#{is_delete},#{is_delete_time})
    </insert>
    <insert id="add" useGeneratedKeys="true" keyProperty="stu_id">
        INSERT into STU_INFO
        (STU_IN_JOB,STU_IN_JOB_COMP,USER_ID,IS_DELETE,IS_DELETE_TIME)
        values
        (#{stu_in_job},#{stu_in_job_comp},#{user_id},#{is_delete},#{is_delete_time})

    </insert>
    <insert id="addEducationInfos" useGeneratedKeys="true" keyProperty="sub_id">
        insert into STU_EDU_INFO
        (EDU_DEGREE,EDU_SCHOOL,EDU_SCHOOL_COUNTRY,EDU_SCHOOL_LOCATION,EDU_MAJOR,
        EDU_COLLEGE,EDU_GPA,EDU_START,EDU_END,STU_ID,IS_DELETE,IS_DELETE_TIME)
        values 
        <foreach collection="educationInfos" item="item" separator=",">
        (#{item.edu_degree},#{item.edu_school},#{item.edu_school_country},
        #{item.edu_school_location},#{item.edu_major},#{item.edu_college},#{item.edu_gpa},
        #{item.edu_start},#{item.edu_end},#{item.stu_id},#{item.is_delete},#{item.is_delete_time})
        </foreach>
    </insert>
    <insert id="addSubInfo" useGeneratedKeys="true" keyProperty="sub_id">
        insert into STU_SUB_INFO
        (SUB_COURSE,SUB_HONOR,SUB_AWARD,SUB_SKILL,SUB_CERTIFICATE,SUB_CERTIF_URL,
        SUB_FOREIGN,SUB_INTEREST,SUB_ACTIVITY,STU_ID,IS_DELETE,IS_DELETE_TIME)
        values
        (#{sub_course},#{sub_honor},#{sub_award},#{sub_skill},#{sub_certificate},#{sub_certif_url}
        ,#{sub_foreign},#{sub_interest},#{sub_activity},#{item.stu_id},#{item.is_delete},#{item.is_delete_time})


    </insert>
    <insert id="addProjects" useGeneratedKeys="true" keyProperty="proj_id">
        insert into STU_PROJECT
        (PROJ_NAME,PROJ_ROLE,PROJ_START_TIME,PROJ_END_TIME,PROJ_DELIVER,DELEVER_PUBLISH,DELEVER_PUB_INSTI,STU_ID,IS_DELETE,IS_DELETE_TIME)
        values
        <foreach collection="list" item="item" separator=",">
            (#{item.proj_name},#{item.proj_role},#{item.start_time},
            #{item.end_time},#{item.proj_deliver},#{item.delever_publish},#{item.delever_pub_insti},#{item.stu_id},#{item.is_delete},#{item.is_delete_time})
        </foreach>

    </insert>
    <insert id="addWorks" useGeneratedKeys="true" keyProperty="work_id">
        insert into STU_WORK
        (WORK_COMPANY,WORK_LOCATION,WORK_POSITION,WORK_SECTOR,
        WORK_START_TIME,WORK_END_TIME,WORK_DUTY,WORK_NATURE,STU_ID,IS_DELETE,IS_DELETE_TIME)
        values
        <foreach collection="works" item="item" separator=",">
            (#{item.work_company},#{item.work_location},#{item.work_position},
            #{item.work_sector},#{item.work_end_time},#{item.work_end_time},
            #{item.work_duty},#{item.work_nature},#{item.stu_id},#{item.is_delete},#{item.is_delete_time})
        </foreach>

    </insert>
    <insert id="addActivities" useGeneratedKeys="true" keyProperty="act_id">
        insert into STU_ACTIVITY
        (ACT_TIME,ACT_ORGANIZATION,ACT_ROLE,ACT_START_TIME,ACT_END_TIME,ACT_DETAIL,STU_ID,IS_DELETE,IS_DELETE_TIME)
        values
        <foreach collection="activities" item="item" separator=",">
            (#{item.act_name},#{item.act_organization},#{item.act_role},
            #{item.act_start_time},#{item.act_end_time},#{item.act_detail},#{item.stu_id},#{item.is_delete},#{item.is_delete_time})
        </foreach>

    </insert>
    <insert id="addJobCollects" useGeneratedKeys="true" keyProperty="collect_id">
        insert into STU_JOB_COLLECT
        (JOB_ID,JOB_COLL_TIME,STU_ID,IS_DELETE,IS_DELETE_TIME)
        values
        <foreach collection="jobCollects" item="item" separator=",">
            (#{item.job_id},#{item.job_coll_time},#{item.stu_id},#{item.is_delete},#{item.is_delete_time})
        </foreach>

    </insert>
    <insert id="addCompCollects">
        inse

    </insert>
    <insert id="addLabels" useGeneratedKeys="true" keyProperty="label_id">
        insert into STU_ADVAN_LABEL
        (LABEL_NUM,STU_ID,IS_DELETE,IS_DELETE_TIME)
        values
        <foreach collection="labels" item="item" separator=",">
            (#{item.label_num},#{item.stu_id},#{item.is_delete},#{item.is_delete_time})
        </foreach>

    </insert>
    <insert id="addPreferJobs" useGeneratedKeys="true" keyProperty="pre_prof_Id">
        insert into STU_PREFER_PROF
        (PRE_PROF_NUM,PRE_AVAIL_TIME,STU_ID,IS_DELETE,IS_DELETE_TIME)
        values
        <foreach collection="preferjobs" item="item" separator=",">
            (#{item.prof_num},#{pre_avail_time},#{item.stu_id},#{item.is_delete},#{item.is_delete_time})
        </foreach>

    </insert>
    <insert id="addPreferIndustries" useGeneratedKeys="true" keyProperty="pre_ind_id">
        insert into STU_PREFER_INDUSTRY
        (PRE_IND_NUM,STU_ID,IS_DELETE,IS_DELETE_TIME)
        values
        <foreach collection="preferIndustries" item="item" separator=",">
            (#{item.pre_ind_num},#{item.stu_id},#{item.is_delete},#{item.is_delete_time})
        </foreach>

    </insert>
    <insert id="addPreferCities" useGeneratedKeys="true" keyProperty="pre_city_id">
        insert into STU_PREFER_CITY
        (PRE_REGION_NUM,STU_ID,IS_DELETE,IS_DELETE_TIME)
        values
        <foreach collection="prefercities" item="item" separator=",">
            (#{item.pre_region_num},#{item.stu_id},#{item.is_delete},#{item.is_delete_time})
        </foreach>

    </insert>
    <insert id="addPreferSalary" useGeneratedKeys="true" keyProperty="pre_sala_id">
        insert into STU_PREFER_SALARY
        (PRE_SALA_CAP,PRE_SALA_FLOOR,STU_ID,IS_DELETE,IS_DELETE_TIME)
        values
        (#{pre_sala_cap},#{pre_sala_floor},#{stu_id},#{is_delete},#{is_delete_time})

    </insert>
    <insert id="addIntroductionVideo" useGeneratedKeys="true" keyProperty="intro_video_id">
        insert into STU_INTRODUCTION_VIDEO
        (INTRO_VIDEO_PATH,STU_ID,IS_DELETE,IS_DELETE_TIME)
        values
        (#{intro_video_path},#{stu_id},#{is_delete},#{is_delete_time})

    </insert>
    <insert id="addNotifications" useGeneratedKeys="true" keyProperty="notify_id">
        insert into STU_NOTIFICATION
        (NOTIFY_CONTENT,NOTIFY_TIME,NOTIFY_READ,STU_ID)
        values
        <foreach collection="notifications" item="item" separator=",">
            (#{item.notify_content},#{item.notify_time},#{item.notify_read},#{item.stu_id})
        </foreach>

    </insert>
    <insert id="addJobApplies" useGeneratedKeys="true" keyProperty="apply_id">
        insert into STU_JOB_APPLY
        (JOB_CV_SEND,JOB_APPLY_TIME,JOB_APPLY_STATUS,STU_ID,JOB_ID)
        values
        <foreach collection="jobApplies" item="item" separator=",">
            (#{item.job_cv_send},#{item.job_apply_time},#{item.job_apply_status},#{item.stu_id},#{item.job_id})
        </foreach>

    </insert>
</mapper>

